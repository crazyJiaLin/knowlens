# Knowlens 项目成本管理

## 📊 成本预算（月度）

### 阿里云服务（日活1000）

| 服务 | 配置 | 月费用 |
|-----|-----|-------|
| ECS | 2核4G | ¥100 |
| MongoDB | MongoDB Atlas 免费版或阿里云 | ¥0-150 |
| Redis | MVP阶段：ECS本地Redis（免费）<br>正式运营：阿里云Redis 1G内存 | ¥0-50 |
| OSS | 50GB存储 + 流量 | ¥20 |
| 短信服务 | 约1000条/月 | ¥50 |
| 带宽 | 5Mbps | ¥80 |
| **小计** | | **¥300-450/月** |

**MongoDB方案选择**：
- **MVP阶段**：使用 MongoDB Atlas 免费套餐（512MB存储，共享集群）- ¥0
- **正式运营**：升级到阿里云MongoDB或Atlas付费版 - ¥150/月

### AI服务

| 服务 | 用量估算 | 月费用 |
|-----|--------|-------|
| Moonshot Kimi | 知识点+洞察约100万tokens | ¥200 |
| 科大讯飞 | 约100小时视频转录 | ¥50 |
| **小计** | | **¥250/月** |

### 总计

- **MVP阶段**：约 ¥500/月（使用MongoDB Atlas免费版 + ECS本地Redis）
- **正式运营**：约 ¥700/月（使用付费MongoDB + 阿里云Redis）

---

## 📈 成本优化建议

### 1. 开发阶段
- 使用 MongoDB Atlas 免费版
- 使用 ECS 本地 Redis（免费）
- 使用本地文件存储替代 OSS（开发环境）

### 2. MVP阶段
- 继续使用 MongoDB Atlas 免费版（512MB 通常足够）
- 继续使用 ECS 本地 Redis
- 启用 OSS 存储（用户上传的文件）
- 控制短信发送量（仅必要场景）

### 3. 正式运营阶段
- 根据实际数据量决定是否升级 MongoDB
- 根据并发量决定是否使用云 Redis
- 优化 AI 服务调用（缓存、批量处理）
- 监控 OSS 流量，设置 CDN 降低流量成本

---

## 💡 成本控制策略

### 1. 按需扩容
- 初期使用最小配置
- 根据实际使用情况逐步扩容
- 设置监控告警，及时调整

### 2. 资源优化
- 使用 CDN 降低 OSS 流量成本
- 优化 AI 调用频率（缓存结果）
- 合理设置 Redis 过期时间

### 3. 成本监控
- 定期查看账单
- 设置预算告警
- 分析成本构成，找出优化点

---

## 📅 预算时间线

### 第1-3个月（开发阶段）
- **预计成本**：¥0-100/月
- **主要支出**：域名、SSL证书（一次性）
- **说明**：使用免费服务，本地开发

### 第4-6个月（MVP阶段）
- **预计成本**：¥500/月
- **主要支出**：ECS、OSS、AI服务
- **说明**：小规模用户测试

### 第7-12个月（正式运营）
- **预计成本**：¥700/月
- **主要支出**：所有服务
- **说明**：根据用户增长调整

---

## 🔍 成本明细说明

### ECS（云服务器）
- **配置**：2核4G
- **用途**：运行后端服务、Redis（MVP阶段）
- **优化**：根据实际负载调整配置

### MongoDB
- **MVP阶段**：Atlas 免费版（512MB）
- **正式运营**：根据数据量选择付费版
- **优化**：定期清理无用数据，优化索引

### Redis
- **MVP阶段**：ECS 本地 Redis（免费）
- **正式运营**：云 Redis 1G 内存
- **优化**：合理设置过期时间，避免内存浪费

### OSS（对象存储）
- **存储**：50GB
- **流量**：根据访问量计算
- **优化**：使用 CDN 降低流量成本

### 短信服务
- **用量**：约1000条/月
- **场景**：验证码、通知
- **优化**：避免无效发送，使用模板短信

### AI服务
- **Moonshot**：知识点提取、洞察生成
- **科大讯飞**：视频转文字（降级方案）
- **优化**：缓存结果，批量处理

---

## 📋 实际账单记录

### 使用说明

- 每月1-5日记录上月实际支出
- 对比预算，分析差异原因
- 记录优化措施和效果

---

## 📅 2025年账单记录

### 2025年11月

#### 实际支出

| 服务 | 预算 | 实际 | 差异 | 说明 |
|-----|-----|-----|-----|-----|
| ECS | ¥100 | - | - | 未部署 |
| MongoDB | ¥0 | - | - | 使用 Atlas 免费版 |
| Redis | ¥0 | - | - | 本地 Redis |
| OSS | ¥20 | - | - | 未启用 |
| 短信服务 | ¥50 | - | - | 未启用 |
| 带宽 | ¥80 | - | - | 未部署 |
| Moonshot | ¥200 | - | - | 未启用 |
| 科大讯飞 | ¥50 | - | - | 未启用 |
| **总计** | **¥500** | **¥0** | **-¥500** | 开发阶段 |

**备注**：
- 当前处于开发阶段，未部署生产环境
- 所有服务使用免费版本或本地环境

---

### 2025年12月

#### 实际支出

| 服务 | 预算 | 实际 | 差异 | 说明 |
|-----|-----|-----|-----|-----|
| ECS | ¥100 | - | - | - |
| MongoDB | ¥0 | - | - | - |
| Redis | ¥0 | - | - | - |
| OSS | ¥20 | - | - | - |
| 短信服务 | ¥50 | - | - | - |
| 带宽 | ¥80 | - | - | - |
| Moonshot | ¥200 | - | - | - |
| 科大讯飞 | ¥50 | - | - | - |
| **总计** | **¥500** | **¥0** | **-¥500** | - |

**备注**：
- 

---

## 📊 成本趋势分析

### 月度成本对比

| 月份 | 预算 | 实际 | 差异 | 阶段 |
|-----|-----|-----|-----|-----|
| 2025-11 | ¥500 | ¥0 | -¥500 | 开发阶段 |
| 2025-12 | ¥500 | - | - | - |

### 成本构成分析

（待数据积累后分析）

---

## 🔍 成本优化记录

### 优化措施

| 日期 | 优化项 | 措施 | 效果 | 节省成本 |
|-----|-------|-----|-----|---------|
| - | - | - | - | - |

---

## 📝 账单查询链接

### 阿里云
- 控制台：https://ecs.console.aliyun.com/
- 账单查询：https://usercenter2.aliyun.com/home

### MongoDB Atlas
- 控制台：https://cloud.mongodb.com/
- 账单查询：https://cloud.mongodb.com/billing

### Moonshot
- 控制台：https://platform.moonshot.cn/
- 账单查询：（待补充）

### 科大讯飞
- 控制台：https://www.xfyun.cn/
- 账单查询：（待补充）

---

## 💡 成本优化待办清单

### 已实施
- [ ] 使用 MongoDB Atlas 免费版
- [ ] 使用本地 Redis
- [ ] 开发阶段使用本地存储

### 待实施
- [ ] 设置预算告警
- [ ] 优化 AI 调用频率
- [ ] 使用 CDN 降低流量成本
- [ ] 定期清理无用数据

---

## 📌 注意事项

1. **及时记录**：每月1-5日记录上月账单
2. **对比分析**：对比预算和实际，找出差异原因
3. **持续优化**：根据账单数据，持续优化成本
4. **设置告警**：在云服务商设置预算告警，避免超支

---

## 🔗 相关文档

- 技术方案：`技术方案文档.md`
- 启动指南：`启动指南.md`

